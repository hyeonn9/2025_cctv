## 작품 개요
> `텐서플로 라이트 모델`과 `라즈베리파이`를 이용한 방범 감시 시스템이다. 현관문 앞에 설치되어, 방문자나 침입자가 접근하는 상황을 가정하여 설계되었다. 텐서플로 라이트 모델을 이용하여 `사람인지 인식하고, 초음파 센서로 문 앞에 실제 사람이 있는지 확인한 뒤`, 10초 머무를 경우 침입자로 간주하여 집 내부의 블루투스 스피커가 `경고음을 출력`한다. 방문자가 초인종 역할의 스위치를 누르면, 현관 앞의 LED가 켜지고 집 안에서는 블루투스 스피커를 통해 알림음이 울려 방문자가 있음을 알린다. 또한 문 앞이 어둡다면 조도 센서가 이를 감지하여 카메라 `영상 밝기를 조정`한다. 사용자는 웹 브라우저를 통해 실시간 카메라 영상을 확인할 수 있으며, 감지된 방문자와 침입자 수는 방문한 시간과 함께 기록되어 `그래프로 조회`할 수 있다.

## 시스템 구조
![](./image/system.png)
```
├── mainapp.py - 웹 브라우저로부터 접속과 요청을 받아 처리하는 플라스크 앱 
├── mainmqtt.py - MQTT 통신, 센서 제어하는 메인 실행 파이썬 파일
├── camera.py - 사진 촬영하고, 텐서플로 라이트 모델을 사용하여 사람이 감지된 이미지를 반환하는 파이썬 코드
├── light.py - 조도 센서를 이용하여 감마 보정하여 영상 밝기 조절하는 파이썬 코드
├── sound.py - 초음파 센서, LED, 스위치를 제어하고 소리를 재생하는 파이썬 코드
├── model
│   └── detect.tflite - 학습된 텐서플로 라이트 모델
├── sounds
│   ├── alert.wav – 경고음 소리 파일
│   └── doorbell.wav – 초인종 소리 파일 
├── static
│   ├── mqttio.js - MQTT 브로커에 접속하고 이미지와 방문, 침입 정보를 받는 자바 스크립트
│   └── myChart.js - 그래프를 관리하는 자바스크립트
└── templates
    └── main.html
```

## 실행 결과
### 1. 사람과 비슷한 크기의 인형이 화면에 나오는 경우, 감지가 되지 않는다.
![인형 모습](readme/doll.gif)

### 2. 사람이 뒤돌아서 화면에 나오는 경우, 초록색 네모 박스로 사람이 감지된 것을 확인할 수 있다.
![사람 뒷모습](<readme/humanBack.gif>)

### 3. 초인종을 누를 경우, LED가 켜지면서 초인종 소리가 출력된다. 그래프에서는 방문한 시각과 함께 방문객 수 증가된다.
![방문자](readme/visitor1.gif)

### 4. 사람으로 감지되면서 50cm 이내에 10초 동안 머무를 경우, 경고음 출력된다. 그래프에는 방문한 시각과 함께 침입자 수가 증가되고 경고음 출력된다.
![침입자](readme/intruder.gif)

### 5. 주변이 어두워도 감마 보정으로 밝게 처리되어 사람이 감지된 것을 확인할 수 있다.
![어두울때](dark.gif)